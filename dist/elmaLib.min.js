"use strict";var __awaiter=this&&this.__awaiter||function(e,s,u,a){return new(u=u||Promise)(function(o,t){function r(e){try{i(a.next(e))}catch(e){t(e)}}function n(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?o(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(r,n)}i((a=a.apply(e,s||[])).next())})};!function(e,t){console.log("elmaLib connected"),"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t(e.b)}(this,function(e){return{getUsersFromRole:function(c,e){return __awaiter(this,void 0,void 0,function*(){var t=e["System"];if(console.log("System:",t),null!=c&&c.length){let e=[];for(var o of c){const u=o.code;if("group"===o.type){var r=yield t.userGroups.search().where(e=>e.__id.eq(u)).first();if(r){var n,i=yield r.users(),i=(e=[...e,...i],yield r.subGroups());for(n of i){var s=yield n.users();e=[...e,...s]}}}else if("user"===o.type&&o.getUsers){r=yield o.getUsers();e=[...e,...r]}else if("orgstruct"===o.type){const a=(yield t.organisationStructure.fetchTree()).getRoot().find(e=>e.id===u);a&&(i=yield t.users.search().where(e=>e.osIds.has(a)).size(1e4).all(),e=[...e,...i])}}return e}})},sendMsg:function(e){return __awaiter(this,void 0,void 0,function*(){yield fetch("https://api.telegram.org/bot1615328145:AAEdh92pyOohUNWEqY7I8vVqqXgZwgDVMk8/sendMessage?chat_id=187149365&text="+e)})},name:"elmaLib"}});