"use strict";var __awaiter=this&&this.__awaiter||function(e,s,u,a){return new(u=u||Promise)(function(r,t){function i(e){try{o(a.next(e))}catch(e){t(e)}}function n(e){try{o(a.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,n)}o((a=a.apply(e,s||[])).next())})};!function(e,t){console.log("elmaLib connected"),"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t(e.b)}(this,function(e){return{getUsersFromRole:function(a){return __awaiter(this,void 0,void 0,function*(){if(null!=a&&a.length){let e=[];for(var t of a){const s=t.code;if("group"===t.type){var r=yield System.userGroups.search().where(e=>e.__id.eq(s)).first();if(r){var i,n=yield r.users(),n=(e=[...e,...n],yield r.subGroups());for(i of n){var o=yield i.users();e=[...e,...o]}}}else if("user"===t.type&&t.getUsers){r=yield t.getUsers();e=[...e,...r]}else if("orgstruct"===t.type){const u=(yield System.organisationStructure.fetchTree()).getRoot().find(e=>e.id===s);u&&(n=yield System.users.search().where(e=>e.osIds.has(u)).size(1e4).all(),e=[...e,...n])}}return e}})},sendMsg:function(e){return __awaiter(this,void 0,void 0,function*(){yield fetch("https://api.telegram.org/bot1615328145:AAEdh92pyOohUNWEqY7I8vVqqXgZwgDVMk8/sendMessage?chat_id=187149365&text="+e)})},name:"elmaLib"}});