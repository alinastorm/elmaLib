"use strict";var __awaiter=this&&this.__awaiter||function(e,s,u,a){return new(u=u||Promise)(function(r,t){function i(e){try{o(a.next(e))}catch(e){t(e)}}function n(e){try{o(a.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,n)}o((a=a.apply(e,s||[])).next())})};!function(e,t){console.log("elmaLib connected"),"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t(e.b)}(this,function(e){return{getUsersFromRole:function(c,e){return __awaiter(this,void 0,void 0,function*(){var t=e["System"];if(null!=c&&c.length){let e=[];for(var r of c){const u=r.code;if("group"===r.type){var i=yield t.userGroups.search().where(e=>e.__id.eq(u)).first();if(i){var n,o=yield i.users(),o=(e=[...e,...o],yield i.subGroups());for(n of o){var s=yield n.users();e=[...e,...s]}}}else if("user"===r.type&&r.getUsers){i=yield r.getUsers();e=[...e,...i]}else if("orgstruct"===r.type){const a=(yield t.organisationStructure.fetchTree()).getRoot().find(e=>e.id===u);a&&(o=yield t.users.search().where(e=>e.osIds.has(a)).size(1e4).all(),e=[...e,...o])}}return e}})},sendMsg:function(e){return __awaiter(this,void 0,void 0,function*(){yield fetch("https://api.telegram.org/bot1615328145:AAEdh92pyOohUNWEqY7I8vVqqXgZwgDVMk8/sendMessage?chat_id=187149365&text="+e)})},name:"elmaLib"}});