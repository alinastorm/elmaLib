"use strict";var __awaiter=this&&this.__awaiter||function(e,s,u,c){return new(u=u||Promise)(function(r,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(n,o)}i((c=c.apply(e,s||[])).next())})};!function(e,t){console.log("elmaLib connected"),"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t(e.b)}(this,function(e){return{getUsersFromRole:function(c){return __awaiter(this,void 0,void 0,function*(){if(null!=c&&c.length){let e=[];for(var t of c){const s=t.code;if("group"===t.type){var r=yield System.userGroups.search().where(e=>e.__id.eq(s)).first();if(r){var n,o=yield r.users(),o=(e=[...e,...o],yield r.subGroups());for(n of o){var i=yield n.users();e=[...e,...i]}}}else if("user"===t.type&&t.getUsers){r=yield t.getUsers();e=[...e,...r]}else if("orgstruct"===t.type){const u=(yield System.organisationStructure.fetchTree()).getRoot().find(e=>e.id===s);u&&(o=yield System.users.search().where(e=>e.osIds.has(u)).size(1e4).all(),e=[...e,...o])}}return e}})},name:"elmaLib"}});